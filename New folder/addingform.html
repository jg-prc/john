<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.css">
    <title>Dynamic Form</title>
    <style>



			.container {
				margin-left:110px;
				padding-bottom: 50px;
			}
			.container .title {
				font-size: 32px;
				border-bottom: solid 2px;
				margin-top: 36px;
				padding-bottom: 8px;
				width: 90%;
				display: flex;
				justify-content: space-between;
			}
			.container .title svg {
				position: relative;
				top: 3px;
				left: 3px;
			}
			#time {
				font-size: 22px;
				display: flex;
				align-items: center;
				gap: 15px;
			}
			.sub-container1 {
				display: flex;
				gap: 50px;
				padding: 20px 0 0 70px;
			}
			.image {
				width: 500px;
				margin: 20px;
			}
			.image img {
				width: 500px;
				height: 400px;
			}
			.splide__arrow {
				height: 3em;
				width: 3em;
			}
			.splide__arrow svg {
				height: 2.2em;
				width: 2.2em;
			}



			form {
				padding-top: 20px;
			}
			.input-container {
				display: flex;
				justify-content: space-between;
				width: 550px;
				margin-bottom: 10px;
			}
			.input-container#row1 {
				justify-content: flex-end;
			}
			span.status {
				display: flex;
				justify-content: center;
				padding: 5px 10px;
				font-size: 13px;
				font-weight: bold;
				border-radius: 12px;
				margin-top: 5px;
				text-transform: uppercase;
				width: 120px;
			}
			span.status.ongoing {
				background-color: #ff4500;
				color: white;
			}

			span.status.resolved {
				background-color: #28a745;
				color: white;
			}
			span.status.pending {
				background-color: #ffc107;
				color: #333;
			}
			input[type=text],
			input[type=date],
			input[type=tel],
			#barangay,
			#street,
			select {
				width: 300px;
				height: 40px;
				padding-left: 15px;
				border: solid 2px;
				border-radius: 10px;
				margin: 5px 0 10px 0;
				background: rgba(255, 255, 255, 0.2);
				font-size: 16px;
			}
			.input-box {
				width: 300px;
				height: 110px;
			}
			.input-box#Type-box,
			.input-box#Zone-box,
			select#incident_type,
			.input-box#Event-box,
			select#zone,
			input[type=date],
			.input-box#Age-box,
			input[type=text]#age,
			.input-box#Sex-box,
			select#sex {
				width: 200px;
			}
			input[type="date"]::-webkit-calendar-picker-indicator {
				position: relative;
				right: 5%;
			}
			i.fa-exclamation-circle {
				position: relative;
				bottom: 60%;
				left: 90%;
			}
			.message,
			i.fas.fa-exclamation-circle {
				visibility: hidden;
				color: #e74c3c;
			}
			.input-box.error #barangay,
			.input-box.error #name,
			.input-box.error #address,
			.input-box.error #age,
			.input-box.error #sex {
				border-color: #e74c3c;
			}





			.sub-container2 {
				padding: 20px 0 0 140px;
			}
			.form-container {
				display: flex;
				flex-wrap: wrap;
				gap: 50px;
			}
			.form-section {
				width: 470px;
				padding: 20px;
				background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='black' stroke-width='2' stroke-dasharray='10' stroke-dashoffset='5' stroke-linecap='square'/%3e%3c/svg%3e");
			}
			.victim-number {
				display: flex;
				justify-content: center;
			}
			input[type=text]#name {
				width: 430px;
			}
			.input-box#Name-box {
				width: 430px;
			}
			.input-box#Address-box {
				width: 430px;
				min-height: 110px;
				height: 140px;
			}
			textarea {
				width: 430px;
				font-size: 16px;
				padding: 7px 15px;
				margin: 5px 0 10px 0;
				border: solid 2px;
				border-radius: 10px;
				resize: none;
			}
			.input-container#row5 {
				width: 430px;
			}
			#Age-box i.fas.fa-exclamation-circle,
			#Sex-box i.fas.fa-exclamation-circle {
				left: 80%;
			}
			#Address-box i.fas.fa-exclamation-circle {
				bottom: 85px;
			}

			#add {
				display: flex;
				justify-content: center;
				align-items: center;
				flex-direction: column;
				gap: 10px;
				width: 470px;
				padding: 20px;
				background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='black' stroke-width='2' stroke-dasharray='10' stroke-dashoffset='5' stroke-linecap='square'/%3e%3c/svg%3e");
			}
			.fa.fa-square-plus {
				font-size: 100px;
			}
			#add span {
				font-size: 20px;
			}
			.btn {
				display: flex;
				justify-content: center;
				padding-top: 50px;
			}
			.btn button {
				padding: 10px 30px;
				font-size: 18px;
				letter-spacing: 1px;
				color: #725AC1;
				background: transparent;
				cursor: pointer;
				transition: ease-out 0.5s;
				border: 2px solid #725AC1;
				border-radius: 10px;
				box-shadow: inset 0 0 0 0 #725AC1;
			}
			.btn button:hover {
				color: white;
				box-shadow: inset 0 -100px 0 0 #725AC1;
			}
			.btn button:active {
				transform: scale(0.9);
			}


    </style>
</head>
<body>
    <form class="victim" id="victim" autocomplete="off" action="" method="post" enctype="multipart/form-data">
        <div class="form-container" id="form-container">
            <div class="" id="add">
                <i class="fa fa-square-plus"></i>
                <span>Add Victim form</span>
            </div>
        </div>
        <div class="btn">
            <button type="submit">Update</button>
        </div>
    </form>

    <script>
        // Function to update victim numbers dynamically
        function updateVictimNumbers() {
            const formSections = document.querySelectorAll('.form-section');
            formSections.forEach((section, index) => {
                const victimNumber = section.querySelector('.victim-number');
                victimNumber.textContent = `Victim No.: ${index + 1}`;
            });
        }

        // Add new victim form when clicking the "Add Victim" button
        document.getElementById('add').addEventListener('click', function() {
            // Create the form section dynamically
            let formSection = document.createElement('div');
            formSection.classList.add('form-section');

            // Add the form fields and remove button to the form section
            let removeBtn = document.createElement('i');
            removeBtn.className = 'fas fa-circle-xmark';
            removeBtn.style.cursor = 'pointer'; // Adding pointer style for clarity
            formSection.appendChild(removeBtn);

            // Create victim form content
            let formContent = `
                <span class="victim-number">Victim No.: 1</span>
                <div class="input-box" id="Name-box">
                    <label for="name">Name</label>
                    <input type="text" name="name[]" id="name" placeholder="Name">
                    <div class="message">Error message</div>
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="input-box" id="Address-box">
                    <label for="address">Address</label>
                    <textarea name="address[]" id="address" placeholder="Address"></textarea>
                    <div class="message">Error message</div>
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="input-container" id="row5">
                    <div class="input-box" id="Age-box">
                        <label for="age">Age</label>
                        <input type="text" name="age[]" id="age" placeholder="Age">
                        <div class="message">Error message</div>
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="input-box" id="Sex-box">
                        <label for="sex">Sex</label>
                        <select name="sex[]" id="sex">
                            <option value="" disabled selected>Sex</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                        <div class="message">Error message</div>
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                </div>
            `;

            // Append the form content to the form section
            formSection.insertAdjacentHTML('beforeend', formContent);

            // Add event listener to remove the form section
            removeBtn.addEventListener('click', function() {
                formSection.remove();
                updateVictimNumbers(); // Update victim numbers after removing
            });

            // Append the form section before the "Add Victim" button
            document.getElementById('form-container').insertBefore(formSection, document.getElementById('add'));

            updateVictimNumbers(); // Update victim numbers after adding
        });

        // Initially update victim numbers
        updateVictimNumbers();



    const loginForm = document.getElementById("victim");

    loginForm.addEventListener("submit", (e) => {
        e.preventDefault();
         validateVictimForms();
    });

    function validateVictimForms() {
        const formSections = document.querySelectorAll('.form-section');
        
        formSections.forEach((section) => {
            const name = section.querySelector('#name');
            const age = section.querySelector('#age');
            const sex = section.querySelector('#sex');
            const address = section.querySelector('#address');

            // Validate name
            if (name.value.trim() === "") {
                setErrorFor(name, "Name cannot be blank");
            } else {
                setSuccessFor(name);
            }

            // Validate age
            if (age.value.trim() === "") {
                setErrorFor(age, "Age cannot be blank");
            } else {
                setSuccessFor(age);
            }

            // Validate sex
            if (sex.value === "") {
                setErrorFor(sex, "Sex cannot be blank");
            } else {
                setSuccessFor(sex);
            }

            // Validate address
            if (address.value.trim() === "") {
                setErrorFor(address, "Address cannot be blank");
            } else {
                setSuccessFor(address);
            }
        });
    }

    function setErrorFor(input, message) {
        const inputBox = input.parentElement;
        const error = inputBox.querySelector(".message");
        inputBox.classList.add("error");
        error.innerText = message;
        error.style.visibility = "visible";
    }

    function setSuccessFor(input) {
        const inputBox = input.parentElement;
        const error = inputBox.querySelector(".message");
        inputBox.classList.remove("error");
        error.style.visibility = "hidden";
    }
</script>


    </script>
</body>

</html>
